<html>
<head>
    <title>Technical Exam</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
    <form>
        <label>Enter Name:</label><br />
        <input type="text" name="name" placeholder="Name" required />
        <br /><br />
        <button type="button">Submit</button>
    </form>
    
    <div id="result">        
    </div>
</body>
</html>
<script>
    $(document).ready(function () {
        $("button").click(function () {
            var name = $("input[name=name]").val();

            $.post("http://localhost/techexamapi/insert.php", { name: name }, function (data) {
                $("input[name=name]").val('');
                alert(data.message);
                fetchNames();
            })
            .fail(function () {
                alert("error");
            });            
        });   
    });

    function fetchNames() {
        $.get("http://localhost/techexamapi/fetch.php", function (data) {
            $("#result").empty();
            $("#result").append('<table>');
            $.each(data, function (index, value) {                
                $("#result").append('<tr><th>' + value.name + '</th></tr>');
            });
            $("#result").append('</table>');
        })        
        .fail(function () {
            alert("error");
        });
    } 
</script>
